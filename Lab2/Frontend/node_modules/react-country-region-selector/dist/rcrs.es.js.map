{"version":3,"file":"rcrs.es.js","sources":["../src/constants.js","../src/helpers.js","../src/CountryDropdown.js","../src/RegionDropdown.js"],"sourcesContent":["export default {\n\tDISPLAY_TYPE_FULL: 'full',\n\tDISPLAY_TYPE_SHORT: 'short',\n\tREGION_LIST_DELIMITER: '|',\n\tSINGLE_REGION_DELIMITER: '~'\n};\n","// reduces the subset of countries depending on whether the user specified a white/blacklist\nexport const filterCountries = (countries, whitelist, blacklist) => {\n\tlet filteredCountries = countries;\n\n\t// N.B. I'd rather use ES6 array.includes() but it requires a polyfill on various browsers. Bit surprising that\n\t// babel doesn't automatically convert it to ES5-friendly code, like the new syntax additions, but that requires\n\t// a separate polyfill which is a total kludge\n\tif (whitelist.length > 0) {\n\t\tfilteredCountries = countries.filter(([, countrySlug]) => whitelist.indexOf(countrySlug) > -1);\n\t} else if (blacklist.length > 0) {\n\t\tfilteredCountries = countries.filter(([, countrySlug]) => blacklist.indexOf(countrySlug) === -1);\n\t}\n\n\treturn filteredCountries;\n};\n\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport CountryRegionData from '../node_modules/country-region-data/data.json';\nimport C from './constants';\nimport * as helpers from './helpers';\n\nexport default class CountryDropdown extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcountries: helpers.filterCountries(CountryRegionData, props.whitelist, props.blacklist)\n\t\t};\n\t}\n\n\tgetCountries () {\n\t\tconst { valueType, labelType } = this.props;\n\n\t\treturn this.state.countries.map(([countryName, countrySlug]) => (\n\t\t\t<option value={(valueType === C.DISPLAY_TYPE_SHORT) ? countrySlug : countryName} key={countrySlug}>\n\t\t\t\t{(labelType === C.DISPLAY_TYPE_SHORT) ? countrySlug : countryName}\n\t\t\t</option>\n\t\t));\n\t}\n\n\tgetDefaultOption () {\n\t\tconst { showDefaultOption, defaultOptionLabel } = this.props;\n\t\tif (!showDefaultOption) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<option value=\"\" key=\"default\">{defaultOptionLabel}</option>\n\t\t);\n\t}\n\n\trender () {\n\t\t// unused properties deliberately added so the remainder\n\t\tconst { name, id, classes, value, onChange, onBlur, disabled, showDefaultOption, defaultOptionLabel,\n\t\t\tlabelType, valueType, whitelist, blacklist, ...arbitraryProps } = this.props;\n\n\t\tconst attrs = {\n\t\t\t...arbitraryProps,\n\t\t\tname,\n\t\t\tvalue,\n\t\t\tonChange: (e) => onChange(e.target.value, e),\n\t\t\tonBlur: (e) => onBlur(e),\n\t\t\tdisabled\n\t\t};\n\t\tif (id) {\n\t\t\tattrs.id = id;\n\t\t}\n\t\tif (classes) {\n\t\t\tattrs.className = classes;\n\t\t}\n\n\t\treturn (\n\t\t\t<select {...attrs}>\n\t\t\t\t{this.getDefaultOption()}\n\t\t\t\t{this.getCountries()}\n\t\t\t</select>\n\t\t);\n\t}\n}\n\nCountryDropdown.propTypes = {\n\tvalue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\tname: PropTypes.string,\n\tid: PropTypes.string,\n\tclasses: PropTypes.string,\n\tshowDefaultOption: PropTypes.bool,\n\tdefaultOptionLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\tonChange: PropTypes.func,\n\tonBlur: PropTypes.func,\n\tlabelType: PropTypes.oneOf([C.DISPLAY_TYPE_FULL, C.DISPLAY_TYPE_SHORT]),\n\tvalueType: PropTypes.oneOf([C.DISPLAY_TYPE_FULL, C.DISPLAY_TYPE_SHORT]),\n\twhitelist: PropTypes.array,\n\tblacklist: PropTypes.array,\n\tdisabled: PropTypes.bool\n};\nCountryDropdown.defaultProps = {\n\tvalue: '',\n\tname: 'rcrs-country',\n\tid: '',\n\tclasses: '',\n\tshowDefaultOption: true,\n\tdefaultOptionLabel: 'Select Country',\n\tonChange: () => {},\n\tonBlur: () => {},\n\tlabelType: C.DISPLAY_TYPE_FULL,\n\tvalueType: C.DISPLAY_TYPE_FULL,\n\twhitelist: [],\n\tblacklist: [],\n\tdisabled: false\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport CountryRegionData from '../node_modules/country-region-data/data.json';\nimport C from './constants';\n\nexport default class RegionDropdown extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tregions: this.getRegions(props.country)\n\t\t};\n\t\tthis.getRegions = this.getRegions.bind(this);\n\t}\n\n\tshouldComponentUpdate (nextProps) {\n\t\treturn (nextProps.country !== this.props.country) || (nextProps.value !== this.props.value);\n\t}\n\n\tcomponentWillReceiveProps (nextProps) {\n\t\tif (nextProps.country === this.props.country) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ regions: this.getRegions(nextProps.country) });\n\t}\n\n\tgetRegions (country) {\n\t\tif (!country) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { countryValueType } = this.props;\n\t\tconst searchIndex = (countryValueType === C.DISPLAY_TYPE_FULL) ? 0 : 1;\n\t\tlet regions = [];\n\t\tCountryRegionData.forEach((i) => {\n\t\t\tif (i[searchIndex] === country) {\n\t\t\t\tregions = i;\n\t\t\t}\n\t\t});\n\n\t\t// this could happen if the user is managing the state of the region/country themselves and screws up passing\n\t\t// in a valid country\n\t\tif (!regions || regions.length === 0) {\n\t\t\tconsole.error('Error. Unknown country passed: ' + country + '. If you\\'re passing a country shortcode, be sure to include countryValueType=\"short\" on the RegionDropdown');\n\t\t\treturn [];\n\t\t}\n\t\treturn regions[2].split(C.REGION_LIST_DELIMITER).map((regionPair) => {\n\t\t\tlet [regionName, regionShortCode = null] = regionPair.split(C.SINGLE_REGION_DELIMITER);\n\t\t\treturn { regionName, regionShortCode };\n\t\t});\n\t}\n\n\tgetRegionList () {\n\t\tconst { labelType, valueType } = this.props;\n\t\treturn this.state.regions.map(({ regionName, regionShortCode }) => {\n\t\t\tconst label = (labelType === C.DISPLAY_TYPE_FULL) ? regionName : regionShortCode;\n\t\t\tconst value = (valueType === C.DISPLAY_TYPE_FULL) ? regionName : regionShortCode;\n\t\t\treturn <option value={value} key={regionName}>{label}</option>;\n\t\t});\n\t}\n\n\t// there are two default options. The \"blank\" option which shows up when the user hasn't selected a country yet, and\n\t// a \"default\" option which shows\n\tgetDefaultOption () {\n\t\tconst { blankOptionLabel, showDefaultOption, defaultOptionLabel, country } = this.props;\n\t\tif (!country) {\n\t\t\treturn <option value=\"\">{blankOptionLabel}</option>;\n\t\t}\n\t\tif (showDefaultOption) {\n\t\t\treturn <option value=\"\">{defaultOptionLabel}</option>;\n\t\t}\n\t\treturn null;\n\t}\n\n\trender () {\n\t\tconst { value, country, onChange, onBlur, id, name, classes, disabled, blankOptionLabel,\n\t\t\tshowDefaultOption, defaultOptionLabel, labelType, valueType, countryValueType,\n\t\t\tdisableWhenEmpty, ...arbitraryProps } = this.props;\n\t\tconst isDisabled = disabled || (disableWhenEmpty && country === '');\n\t\tconst attrs = {\n\t\t\t...arbitraryProps,\n\t\t\tname,\n\t\t\tvalue,\n\t\t\tonChange: (e) => onChange(e.target.value, e),\n\t\t\tonBlur: (e) => onBlur(e),\n\t\t\tdisabled: isDisabled\n\t\t};\n\t\tif (id) {\n\t\t\tattrs.id = id;\n\t\t}\n\t\tif (classes) {\n\t\t\tattrs.className = classes;\n\t\t}\n\n\t\treturn (\n\t\t\t<select {...attrs}>\n\t\t\t\t{this.getDefaultOption()}\n\t\t\t\t{this.getRegionList()}\n\t\t\t</select>\n\t\t);\n\t}\n}\n\nRegionDropdown.propTypes = {\n\tcountry: PropTypes.string,\n\tvalue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\tname: PropTypes.string,\n\tid: PropTypes.string,\n\tclasses: PropTypes.string,\n\tblankOptionLabel: PropTypes.string,\n\tshowDefaultOption: PropTypes.bool,\n\tdefaultOptionLabel: PropTypes.string,\n\tonChange: PropTypes.func,\n\tonBlur: PropTypes.func,\n\tlabelType: PropTypes.string,\n\tvalueType: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tdisableWhenEmpty: PropTypes.bool\n};\nRegionDropdown.defaultProps = {\n\tcountry: '',\n\tvalue: '',\n\tname: 'rcrs-region',\n\tid: '',\n\tclasses: '',\n\tblankOptionLabel: '-',\n\tshowDefaultOption: true,\n\tdefaultOptionLabel: 'Select Region',\n\tonChange: () => {},\n\tonBlur: () => {},\n\tcountryValueType: C.DISPLAY_TYPE_FULL,\n\tlabelType: C.DISPLAY_TYPE_FULL,\n\tvalueType: C.DISPLAY_TYPE_FULL,\n\tdisabled: false,\n\tdisableWhenEmpty: false\n};\n"],"names":["filterCountries","countries","whitelist","blacklist","filteredCountries","length","filter","countrySlug","indexOf","CountryDropdown","props","state","helpers","CountryRegionData","valueType","labelType","map","countryName","C","DISPLAY_TYPE_SHORT","showDefaultOption","defaultOptionLabel","name","id","classes","value","onChange","onBlur","disabled","arbitraryProps","attrs","e","target","className","getDefaultOption","getCountries","Component","propTypes","PropTypes","oneOfType","string","number","bool","func","oneOf","DISPLAY_TYPE_FULL","array","defaultProps","RegionDropdown","getRegions","country","bind","nextProps","setState","regions","countryValueType","searchIndex","forEach","i","error","split","REGION_LIST_DELIMITER","regionPair","SINGLE_REGION_DELIMITER","regionName","regionShortCode","label","blankOptionLabel","disableWhenEmpty","isDisabled","getRegionList"],"mappings":"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"}